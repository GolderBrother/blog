(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{610:function(s,a,t){"use strict";t.r(a);var e=t(1),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"react-native-热更新-code-push-部署文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-native-热更新-code-push-部署文档"}},[s._v("#")]),s._v(" React Native + 热更新("),t("code",[s._v("Code Push")]),s._v(") 部署文档")]),s._v(" "),t("h2",{attrs:{id:"_1-解决什么问题："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-解决什么问题："}},[s._v("#")]),s._v(" 1.解决什么问题：")]),s._v(" "),t("p",[s._v("1）"),t("code",[s._v("web")]),s._v(" 端与原生端打包解偶，"),t("code",[s._v("web")]),s._v(" 端打包可以不依赖原生一起打包。\n2）"),t("code",[s._v("web")]),s._v(" 端与原生部分联调问题，不需要再将 "),t("code",[s._v("bundle")]),s._v(" 包传输给原生运行，在原生已支持对应功能 "),t("code",[s._v("api")]),s._v(" 的情况下 "),t("code",[s._v("web")]),s._v(" 端可自行下载安装安装包，将调试代码打包以热更新的方式推到 "),t("code",[s._v("app")]),s._v(" 上，并在 "),t("code",[s._v("Android Studio")]),s._v(" 或 "),t("code",[s._v("Xcode")]),s._v(" 的上查看调试日志。")]),s._v(" "),t("h2",{attrs:{id:"_2-服务器部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-服务器部署"}},[s._v("#")]),s._v(" 2.服务器部署")]),s._v(" "),t("p",[s._v("创建并连接"),t("code",[s._v("ECS")]),s._v("实例")]),s._v(" "),t("h3",{attrs:{id:"一、部署node-js环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、部署node-js环境"}},[s._v("#")]),s._v(" 一、部署"),t("code",[s._v("Node.js")]),s._v("环境")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("git")]),s._v(" 将源码克隆到本地的"),t("code",[s._v("~/.nvm")]),s._v("目录下，并检查最新版本。")]),s._v(" "),t("p",[s._v("下载 "),t("code",[s._v("Node.js")]),s._v(" 安装包。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nodejs.org/dist/v6.9.5/node-v14.0.0-linux-x64.tar.xz\n")])])]),t("h4",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压"}},[s._v("#")]),s._v(" 解压")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xvf node-v6.9.5-linux-x64.tar.xz\n")])])]),t("p",[s._v("创建软链接，您就可以在任意目录下直接使用"),t("code",[s._v("node")]),s._v("和"),t("code",[s._v("npm")]),s._v("命令。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /root/node-v6.9.5-linux-x64/bin/node /usr/local/bin/node\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /root/node-v6.9.5-linux-x64/bin/npm /usr/local/bin/npm\n")])])]),t("h4",{attrs:{id:"查看node、npm版本。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看node、npm版本。"}},[s._v("#")]),s._v(" 查看"),t("code",[s._v("node、npm")]),s._v("版本。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("node -v\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n")])])]),t("p",[s._v("如果需要将该软件安装到其他目录（例如："),t("code",[s._v("/opt/node/")]),s._v("）下，请进行如下操作：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /opt/node/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /root/node-v6.9.5-linux-x64/* /opt/node/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f /usr/local/bin/node\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f /usr/local/bin/npm\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /opt/node/bin/node /usr/local/bin/node\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /opt/node/bin/npm /usr/local/bin/npm\n")])])]),t("h3",{attrs:{id:"安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql"}},[s._v("#")]),s._v(" 安装"),t("code",[s._v("mysql")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz\n")])])]),t("p",[s._v("下载完")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzvf mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz\n")])])]),t("p",[s._v("移至"),t("code",[s._v("/usr/local/")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mysql-5.7.24-linux-glibc2.12-x86_64 /usr/local/\n")])])]),t("h4",{attrs:{id:"改名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#改名"}},[s._v("#")]),s._v(" 改名")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mysql-5.7.24-linux-glibc2.12-x86_64 mysql\n")])])]),t("h4",{attrs:{id:"在-usr-local-mysql目录下创建data目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在-usr-local-mysql目录下创建data目录"}},[s._v("#")]),s._v(" 在"),t("code",[s._v("/usr/local/mysql")]),s._v("目录下创建"),t("code",[s._v("data")]),s._v("目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/mysql/data\n")])])]),t("h4",{attrs:{id:"更改mysql目录下所有的目录及文件夹所属的用户组和用户，以及权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更改mysql目录下所有的目录及文件夹所属的用户组和用户，以及权限"}},[s._v("#")]),s._v(" 更改"),t("code",[s._v("mysql")]),s._v("目录下所有的目录及文件夹所属的用户组和用户，以及权限")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:用户名 /usr/local/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /usr/local/mysql\n")])])]),t("h4",{attrs:{id:"安装链接库文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装链接库文件"}},[s._v("#")]),s._v(" 安装链接库文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio-dev\n")])])]),t("p",[s._v("You need to be root to perform this command 怎么解决：\n切换到"),t("code",[s._v("root")]),s._v("用户\n"),t("code",[s._v("su")]),s._v("回车输入密码\n刚安装完，没有设置"),t("code",[s._v("root")]),s._v("用户密码："),t("code",[s._v("sudo passwd")]),s._v("，然后会让你输入当前用户密码，输入完后再输入"),t("code",[s._v("root")]),s._v("用户密码就可以了")]),s._v(" "),t("p",[s._v("编译安装并初始化"),t("code",[s._v("mysql")]),s._v(",务必记住初始化输出日志末尾的密码（数据库管理员临时密码）")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("root@localhost: 7Pa,9hIokNRe\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/bin\n./mysqld --initialize --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql\n")])])]),t("p",[s._v("输入"),t("code",[s._v("vi /etc/my.cnf")]),s._v("，编辑配置文件"),t("code",[s._v("my.cnf")]),s._v("，添加配置如下:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sql_mode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nsymbolic-links"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("max_connections")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("innodb_file_per_table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lower_case_table_names")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"启动mysql服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql服务器"}},[s._v("#")]),s._v(" 启动"),t("code",[s._v("mysql")]),s._v("服务器")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/usr/local/mysql/support-files/mysql.server start\n")])])]),t("p",[s._v("如果出现如下提示信息")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Starting MySQL... ERROR! The server quit without updating PID file\n")])])]),t("p",[s._v("解决办法：")]),s._v(" "),t("h4",{attrs:{id:"查询服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询服务"}},[s._v("#")]),s._v(" 查询服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysqld "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v("\n")])])]),t("h4",{attrs:{id:"结束进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结束进程"}},[s._v("#")]),s._v(" 结束进程")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("kill -9 PID\n")])])]),t("h4",{attrs:{id:"启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/usr/local/mysql/support-files/mysql.server start\n")])])]),t("h4",{attrs:{id:"添加软连接，并重启mysql服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加软连接，并重启mysql服务"}},[s._v("#")]),s._v(" 添加软连接，并重启"),t("code",[s._v("mysql")]),s._v("服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" -s /usr/local/mysql/bin/mysql /usr/bin/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql restart\n")])])]),t("h4",{attrs:{id:"登录-mysql，修改密码-密码为步骤-5-生成的临时密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录-mysql，修改密码-密码为步骤-5-生成的临时密码"}},[s._v("#")]),s._v(" 登录 mysql，修改密码(密码为步骤 5 生成的临时密码)")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql -u root -p\nEnter password:\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("set password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yourpass'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("h4",{attrs:{id:"开放远程连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放远程连接"}},[s._v("#")]),s._v(" 开放远程连接")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("mysql>use mysql;\nmsyql>update user set user.Host='%' where user.User='root';\nmysql>flush privileges;\n")])])]),t("h4",{attrs:{id:"设置开机自动启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机自动启动"}},[s._v("#")]),s._v(" 设置开机自动启动")]),s._v(" "),t("ul",[t("li",[s._v("1、将服务文件拷贝到"),t("code",[s._v("init.d")]),s._v("下，并重命名为"),t("code",[s._v("mysql")])])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[root@localhost /]# cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld\n")])])]),t("ul",[t("li",[s._v("2、赋予可执行权限")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod +x /etc/init.d/mysqld")]),s._v("\n")])])]),t("ul",[t("li",[s._v("3、添加服务")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sysv-rc-conf mysqld on")]),s._v("\n")])])]),t("ul",[t("li",[s._v("4、显示服务列表")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sysv-rc-conf --list")]),s._v("\n")])])]),t("h3",{attrs:{id:"部署-code-push"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署-code-push"}},[s._v("#")]),s._v(" 部署 "),t("code",[s._v("code-push")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone http://172.16.6.11:8050/zhangyaohuang/work-hot-update.git\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" work-hot-update\n")])])]),t("h4",{attrs:{id:"修改-code-push-server-仓库配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-code-push-server-仓库配置"}},[s._v("#")]),s._v(" 修改 code-push-server 仓库配置")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("vim config/config.js\n")])])]),t("h4",{attrs:{id:"配置数据库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库"}},[s._v("#")]),s._v(" 配置数据库")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Config for database, only support mysql.")]),s._v("\ndb"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RDS_USERNAME")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RDS_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DATA_BASE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"codepush"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RDS_HOST")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RDS_PORT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  dialect"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  logging"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  operatorsAliases"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("h4",{attrs:{id:"修改-local-对象的下载地址为本机-或服务器的-ip-地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-local-对象的下载地址为本机-或服务器的-ip-地址"}},[s._v("#")]),s._v(" 修改 "),t("code",[s._v("local")]),s._v(" 对象的下载地址为本机(或服务器的 "),t("code",[s._v("ip")]),s._v(" 地址)")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Binary files storage dir, Do not use tmpdir and it's public download dir.")]),s._v("\n  storageDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STORAGE_DIR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/ubuntu/codepush/storage"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Binary files download host address which Code Push Server listen to. the files storage in storageDir.")]),s._v("\n  downloadUrl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LOCAL_DOWNLOAD_URL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://172.16.6.190:3000"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// public static download spacename.")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  common"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......//")]),s._v("\n  dataDir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/home/ubuntu/codepush/data'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......//")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),t("h4",{attrs:{id:"初始化数据库信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库信息"}},[s._v("#")]),s._v(" 初始化数据库信息")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("./bin/db init --dbhost localhost --dbuser root --dbpassword 数据库密码\n")])])]),t("h4",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[s._v("#")]),s._v(" 安装依赖")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("h4",{attrs:{id:"安装完成启动服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装完成启动服务"}},[s._v("#")]),s._v(" 安装完成启动服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);