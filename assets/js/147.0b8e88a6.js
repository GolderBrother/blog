(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{580:function(t,s,a){"use strict";a.r(s);var n=a(1),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"前端的图片优化方案你知道多少"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端的图片优化方案你知道多少"}},[t._v("#")]),t._v(" 前端的图片优化方案你知道多少")]),t._v(" "),a("h2",{attrs:{id:"使用-base64-编码代替图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-base64-编码代替图片"}},[t._v("#")]),t._v(" 使用 base64 编码代替图片")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：适用于图片大小"),a("strong",[t._v("小于 2KB")]),t._v("，页面上引用图片总数不多的情况")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：将图片转换为"),a("code",[t._v("base64")]),t._v("编码字符串"),a("code",[t._v("inline")]),t._v("到页面或"),a("code",[t._v("css")]),t._v("中")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：减少"),a("code",[t._v("http")]),t._v("的请求次数，并可以放到后台数据库中，只传输字符串，有较多的构建工具可以直接实现")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：这种方法仅限于图片总数较少，而且图片大小"),a("strong",[t._v("小于 2KB")]),t._v("的情况。否则图片字符串会变得很长很长")]),t._v(" "),a("h2",{attrs:{id:"合并图片-sprite-雪碧图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#合并图片-sprite-雪碧图"}},[t._v("#")]),t._v(" 合并图片 sprite(雪碧图)")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：任何用到页面图片的场景")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：将多个页面上用到的背景图片"),a("strong",[t._v("合并")]),t._v("成一个大的图片, 然后在页面中以 "),a("code",[t._v("css")]),t._v(" 的 "),a("code",[t._v("background-position")]),t._v(" 属性来定位引用。")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：可以有效的较少请求个数，而且，而不影响开发体验，使用构建插件可以做到对开发者透明。适用于页面图片多且丰富的场景。")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：生成的图片体积较大，减少请求个数同时也增加了图片大小，不合理拆分将不利于并行加载")]),t._v(" "),a("h2",{attrs:{id:"使用-css、svg、canvas-或-iconfont-代替图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-css、svg、canvas-或-iconfont-代替图片"}},[t._v("#")]),t._v(" 使用 css、svg、canvas 或 iconfont 代替图片")]),t._v(" "),a("h3",{attrs:{id:"css-代替图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-代替图片"}},[t._v("#")]),t._v(" css 代替图片")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：适用于移动端或较高级的浏览器，而且绘制的图案较为简单。")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("："),a("code",[t._v("css")]),t._v("方式可以用来绘制相对简单的"),a("strong",[t._v("图案")]),t._v("来代替图片，一般使用"),a("code",[t._v("before")]),t._v("或者"),a("code",[t._v("after")]),t._v("伪元素来丰富"),a("strong",[t._v("图案")]),t._v("的复杂度。")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：具有实现简单，图片体积小的特点，可以实现简单的动态效果")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：也受限于"),a("code",[t._v("css")]),t._v("的兼容性特点，绘制复杂"),a("strong",[t._v("图案")]),t._v("困难\nsvg 的描述和适用场景上文已说明。")]),t._v(" "),a("h3",{attrs:{id:"canvas-代替图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#canvas-代替图片"}},[t._v("#")]),t._v(" canvas 代替图片")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：需要高性能的图片或动画")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：适用"),a("code",[t._v("html5")]),t._v("的"),a("code",[t._v("canvas")]),t._v("元素绘制创建图片")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：整个就是画 2D 图形时，页面渲染性能比较高，页面渲染性能受图形复杂度影响小，性能只受图形的分辨率的影响，画出来的图形可以直接保存为 .png 或者 .jpg 的图形，适合于画光栅图像或者不规则图形")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：没有 dom 操作，必须依赖定时器，文字渲染性能差，不能添加描述(title 属性什么的)，兼容性限制")]),t._v(" "),a("h3",{attrs:{id:"iconfont-代替图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iconfont-代替图片"}},[t._v("#")]),t._v(" iconfont 代替图片")]),t._v(" "),a("p",[a("code",[t._v("iconfont")]),t._v("是一种"),a("code",[t._v("web字体")]),t._v("来代替图片的解决方案")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：代替页面上色彩单一的图片")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("："),a("strong",[t._v("web 字体库")])]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：兼容性好，应用广，目前使用也很广泛")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：但是由于字体的"),a("strong",[t._v("颜色设置单一")]),t._v("，只能用于代替颜色单一的图片，对于色彩复杂的图片，iconfont 处理起来比较困难")]),t._v(" "),a("h3",{attrs:{id:"响应式图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应式图片"}},[t._v("#")]),t._v(" 响应式图片")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：不同终端对同一个图片需求不一样，可以根据终端加载不同的图片来节省没必要的流量")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：通过"),a("code",[t._v("picture")]),t._v("元素，"),a("code",[t._v("picturefill")]),t._v("或平台判断来为"),a("strong",[t._v("不同终端平台")]),t._v("输出不同的图片")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：减少没必要的图片加载，灵活控制，"),a("strong",[t._v("慢速用户加载小图片")]),t._v("不至于加载失败，移动端没必要加载大尺寸图片等，可以通过不同方式兼容所有浏览器")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：无法避免图片的加载过程，图片本身没优化")]),t._v(" "),a("h3",{attrs:{id:"图片压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩"}},[t._v("#")]),t._v(" 图片压缩")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：在不得不加载图片的前提下，要进一步提升优化效果，只能通过"),a("strong",[t._v("有损或无损压缩")]),t._v("来减少图片的大小。")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：对图片进行"),a("strong",[t._v("无损、有损压缩")]),t._v("，转为压缩后图片来实现")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：减少图片加载流量，效果比较明显")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：服务器和浏览器"),a("strong",[t._v("压力增大")]),t._v("，而且服务器需要额外的服务支持")]),t._v(" "),a("h3",{attrs:{id:"更好的图片格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更好的图片格式"}},[t._v("#")]),t._v(" 更好的图片格式")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：之前说到"),a("code",[t._v("webp、bpg、sharpP")]),t._v("等新图片格式具有更好的压缩比，可以使用这类新型的图片来代替原始图片")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：对"),a("strong",[t._v("图片格式转换")]),t._v("，在画质可以接受的情况下达到更好的压缩比效果")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：减少图片加载流量，效果比较明显")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：服务器和浏览器"),a("strong",[t._v("压力增大")]),t._v("，而且服务器需要额外的服务支持，格式转换要考虑浏览器的兼容性")]),t._v(" "),a("h3",{attrs:{id:"开启-cdn-加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-cdn-加速"}},[t._v("#")]),t._v(" 开启 CDN 加速")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：在宣传类、酷炫类网站首页，可能会用大量的高清图片，可以上传至"),a("code",[t._v("CDN")]),t._v("服务器来加速资源响应速度")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("："),a("code",[t._v("CDN")]),t._v("的全称是"),a("code",[t._v("Content Delivery Network")]),t._v("，即内容分发网络,使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率")]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：加快图片资源的"),a("strong",[t._v("请求速度")]),t._v("，提高渲染效率，减少用户的等待时间")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：有些 cdn 服务器需要付费，增加网站成本，而且图片部署至 cdn 也要花费人力时间")]),t._v(" "),a("h3",{attrs:{id:"图片懒加载-延迟加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片懒加载-延迟加载"}},[t._v("#")]),t._v(" 图片懒加载/延迟加载")]),t._v(" "),a("p",[a("strong",[t._v("场景")]),t._v("：在一些需要展示大量图片的 PC 网站或者移动端中，需要使用图片懒加载来提高页面渲染速度")]),t._v(" "),a("p",[a("strong",[t._v("原理")]),t._v("：暂时不设置图片的"),a("code",[t._v("src")]),t._v("属性，而是将图片的"),a("code",[t._v("url")]),t._v("隐藏起来，比如先写在"),a("code",[t._v("data-src")]),t._v("里面，等某些事件触发的时候(比如"),a("strong",[t._v("滚动到可视区域")]),t._v("，"),a("strong",[t._v("点击加载图片")]),t._v(")再将图片真实的"),a("code",[t._v("url")]),t._v("放进"),a("code",[t._v("src")]),t._v("属性里面，从而实现图片的"),a("strong",[t._v("延迟加载")])]),t._v(" "),a("p",[a("strong",[t._v("优势")]),t._v("：可以提高页面的渲染速度，减少不友好的白屏效果，提升用户体验")]),t._v(" "),a("p",[a("strong",[t._v("劣势")]),t._v("：由于监听滚动事件和实时获取 DOM 的位置信息，操作 img 标签也相当于操作 DOM 结构，会造成页面"),a("strong",[t._v("回流")]),t._v("，性能不好")]),t._v(" "),a("h3",{attrs:{id:"图片预加载-补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片预加载-补充"}},[t._v("#")]),t._v(" 图片预加载(补充)")]),t._v(" "),a("p",[t._v("在一些需要展示大量图片的网站，实现图片的提前加载。从而提升用户体验。常用的方式有两种，一种是隐藏在"),a("code",[t._v("css")]),t._v("的"),a("code",[t._v("background")]),t._v("的"),a("code",[t._v("url")]),t._v("属性里面，一种是通过"),a("code",[t._v("javascript")]),t._v("的"),a("code",[t._v("Image")]),t._v("对象设置实例对象的"),a("code",[t._v("src")]),t._v("属性实现图片的预加载。")]),t._v(" "),a("p",[t._v("看下两种实现方式：")]),t._v(" "),a("h4",{attrs:{id:"css-预加载图片方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-预加载图片方式"}},[t._v("#")]),t._v(" CSS 预加载图片方式")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#preload-01")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://domain.tld/image-01.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" no-repeat -9999px -9999px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#preload-02")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://domain.tld/image-02.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" no-repeat -9999px -9999px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#preload-03")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token url"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http://domain.tld/image-03.png"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" no-repeat -9999px -9999px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"javascript-预加载图片的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-预加载图片的方式"}},[t._v("#")]),t._v(" Javascript 预加载图片的方式")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("preloadimages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("arr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newimages "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    loadedimages "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("postaction")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此处增加了一个postaction函数")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" arr "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("imageloadpost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    loadedimages"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loadedimages "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//加载完成用我们调用postaction函数并将newimages数组做为参数传递进去")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    newimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    newimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    newimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("imageloadpost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    newimages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("imageloadpost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//此处返回一个空白对象的done方法")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("done")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("f")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      postaction "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" postaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"图片压缩方法-补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片压缩方法-补充"}},[t._v("#")]),t._v(" 图片压缩方法(补充)")]),t._v(" "),a("p",[t._v("压缩图片方式比较多，这里不一一列出，例如下面的部分工具平台：")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://kraken.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kraken (Web)主页"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"http://zhitu.tencent.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("智图主页"),a("OutboundLink")],1),t._v("\n支持原图"),a("code",[t._v("png")]),t._v("转为"),a("code",[t._v("jpeg")]),t._v("和"),a("code",[t._v("webp")]),t._v("(目前不支持 bpg)，并提供各种压缩比压缩，目前在"),a("code",[t._v("tx")]),t._v("内部广泛使用。\n目前 bpg 格式图片也有部分公司在试用。这方面也可以尝试下。")])])]),t._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[t._v("#")]),t._v(" 最后")]),t._v(" "),a("p",[t._v("文中若有不准确或错误的地方，欢迎指出，有兴趣可以的关注下"),a("a",{attrs:{href:"https://github.com/GolderBrother",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github"),a("OutboundLink")],1),t._v("，一起学习呀~~")]),t._v(" "),a("comment")],1)}),[],!1,null,null,null);s.default=r.exports}}]);