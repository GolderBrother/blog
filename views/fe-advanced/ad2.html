<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- 为了可以访问第三方图床的图片，才添加了这句代码，如果你的图片是存在本地的，去掉这句代码即可 -->
    <meta id="referrer" name="referrer" content="never" />
    <!-- <meta id="referrer" name="referrer" content="always" /> -->
    <title>如何高效操作 DOM 元素？ | 全栈修炼</title>
    <meta name="description" content="GolderBrother的博客" />
    <link rel="icon" href="/blog/assets/favicon.ico">  <link rel="preload" href="/blog/assets/css/0.styles.2dde6c16.css" as="style"><link rel="preload" href="/blog/assets/js/app.74817549.js" as="script"><link rel="preload" href="/blog/assets/js/2.f761193d.js" as="script"><link rel="preload" href="/blog/assets/js/16.7794197c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ea66aff3.js"><link rel="prefetch" href="/blog/assets/js/100.1650309e.js"><link rel="prefetch" href="/blog/assets/js/101.dd5cdc51.js"><link rel="prefetch" href="/blog/assets/js/102.81a755d8.js"><link rel="prefetch" href="/blog/assets/js/103.84d1e041.js"><link rel="prefetch" href="/blog/assets/js/104.6bb79eda.js"><link rel="prefetch" href="/blog/assets/js/105.ac0fa491.js"><link rel="prefetch" href="/blog/assets/js/106.e7f21162.js"><link rel="prefetch" href="/blog/assets/js/107.a932b9dd.js"><link rel="prefetch" href="/blog/assets/js/108.08337848.js"><link rel="prefetch" href="/blog/assets/js/109.0a8ac1ac.js"><link rel="prefetch" href="/blog/assets/js/11.2b17f742.js"><link rel="prefetch" href="/blog/assets/js/110.63f713ce.js"><link rel="prefetch" href="/blog/assets/js/111.3ded28af.js"><link rel="prefetch" href="/blog/assets/js/112.feb77183.js"><link rel="prefetch" href="/blog/assets/js/113.ca7a3dfe.js"><link rel="prefetch" href="/blog/assets/js/114.278aaabb.js"><link rel="prefetch" href="/blog/assets/js/115.3f930fa5.js"><link rel="prefetch" href="/blog/assets/js/116.0686a02f.js"><link rel="prefetch" href="/blog/assets/js/117.22090497.js"><link rel="prefetch" href="/blog/assets/js/118.d7f089fa.js"><link rel="prefetch" href="/blog/assets/js/119.3c8db627.js"><link rel="prefetch" href="/blog/assets/js/12.d4feb8d0.js"><link rel="prefetch" href="/blog/assets/js/120.e516c49a.js"><link rel="prefetch" href="/blog/assets/js/121.d702cc4d.js"><link rel="prefetch" href="/blog/assets/js/122.13d4f773.js"><link rel="prefetch" href="/blog/assets/js/123.6905c46b.js"><link rel="prefetch" href="/blog/assets/js/124.ccac9465.js"><link rel="prefetch" href="/blog/assets/js/125.3fad187d.js"><link rel="prefetch" href="/blog/assets/js/126.065c2aad.js"><link rel="prefetch" href="/blog/assets/js/127.d4aef2ae.js"><link rel="prefetch" href="/blog/assets/js/128.00766f11.js"><link rel="prefetch" href="/blog/assets/js/129.51d245ca.js"><link rel="prefetch" href="/blog/assets/js/13.21c8139a.js"><link rel="prefetch" href="/blog/assets/js/130.82b8009d.js"><link rel="prefetch" href="/blog/assets/js/131.fb8da159.js"><link rel="prefetch" href="/blog/assets/js/132.2484fde1.js"><link rel="prefetch" href="/blog/assets/js/133.177fe1b1.js"><link rel="prefetch" href="/blog/assets/js/134.5611fa2b.js"><link rel="prefetch" href="/blog/assets/js/135.4d1053c3.js"><link rel="prefetch" href="/blog/assets/js/136.2973975f.js"><link rel="prefetch" href="/blog/assets/js/137.7c44ba09.js"><link rel="prefetch" href="/blog/assets/js/138.16973a68.js"><link rel="prefetch" href="/blog/assets/js/139.2f797054.js"><link rel="prefetch" href="/blog/assets/js/14.8cf70ab3.js"><link rel="prefetch" href="/blog/assets/js/140.f94ba770.js"><link rel="prefetch" href="/blog/assets/js/141.69f9800f.js"><link rel="prefetch" href="/blog/assets/js/142.b567c447.js"><link rel="prefetch" href="/blog/assets/js/143.f1ee0ada.js"><link rel="prefetch" href="/blog/assets/js/144.138163b4.js"><link rel="prefetch" href="/blog/assets/js/145.e3bee357.js"><link rel="prefetch" href="/blog/assets/js/146.3a9fd8c7.js"><link rel="prefetch" href="/blog/assets/js/147.0b8e88a6.js"><link rel="prefetch" href="/blog/assets/js/148.81da2cf3.js"><link rel="prefetch" href="/blog/assets/js/149.d44d0121.js"><link rel="prefetch" href="/blog/assets/js/15.ea38d450.js"><link rel="prefetch" href="/blog/assets/js/150.7665d423.js"><link rel="prefetch" href="/blog/assets/js/151.1ab5f781.js"><link rel="prefetch" href="/blog/assets/js/152.620db4ac.js"><link rel="prefetch" href="/blog/assets/js/153.695d756f.js"><link rel="prefetch" href="/blog/assets/js/154.ee82e0a2.js"><link rel="prefetch" href="/blog/assets/js/155.d7bc8987.js"><link rel="prefetch" href="/blog/assets/js/156.95cf0d01.js"><link rel="prefetch" href="/blog/assets/js/157.76159f7e.js"><link rel="prefetch" href="/blog/assets/js/158.e27d7f12.js"><link rel="prefetch" href="/blog/assets/js/159.84d58dcb.js"><link rel="prefetch" href="/blog/assets/js/160.44f17ac0.js"><link rel="prefetch" href="/blog/assets/js/161.a9fc1420.js"><link rel="prefetch" href="/blog/assets/js/162.953ffb8f.js"><link rel="prefetch" href="/blog/assets/js/163.d4b64d04.js"><link rel="prefetch" href="/blog/assets/js/164.d718bdc2.js"><link rel="prefetch" href="/blog/assets/js/165.464562ce.js"><link rel="prefetch" href="/blog/assets/js/166.3486924a.js"><link rel="prefetch" href="/blog/assets/js/167.044ce06a.js"><link rel="prefetch" href="/blog/assets/js/168.81e22c48.js"><link rel="prefetch" href="/blog/assets/js/169.4c4a576c.js"><link rel="prefetch" href="/blog/assets/js/17.7083b50c.js"><link rel="prefetch" href="/blog/assets/js/170.4b71dfab.js"><link rel="prefetch" href="/blog/assets/js/171.d2051e87.js"><link rel="prefetch" href="/blog/assets/js/172.eeb81923.js"><link rel="prefetch" href="/blog/assets/js/173.aafb24fa.js"><link rel="prefetch" href="/blog/assets/js/174.2e261a79.js"><link rel="prefetch" href="/blog/assets/js/175.aafd75a2.js"><link rel="prefetch" href="/blog/assets/js/176.b7681070.js"><link rel="prefetch" href="/blog/assets/js/177.e9bdb5f5.js"><link rel="prefetch" href="/blog/assets/js/178.4a3ca305.js"><link rel="prefetch" href="/blog/assets/js/179.40201a86.js"><link rel="prefetch" href="/blog/assets/js/18.3dbb7741.js"><link rel="prefetch" href="/blog/assets/js/180.68c6346e.js"><link rel="prefetch" href="/blog/assets/js/181.326c1f42.js"><link rel="prefetch" href="/blog/assets/js/182.92780c32.js"><link rel="prefetch" href="/blog/assets/js/183.65f40b5a.js"><link rel="prefetch" href="/blog/assets/js/19.78fd69da.js"><link rel="prefetch" href="/blog/assets/js/20.be39648e.js"><link rel="prefetch" href="/blog/assets/js/21.80a318b4.js"><link rel="prefetch" href="/blog/assets/js/22.4040efb3.js"><link rel="prefetch" href="/blog/assets/js/23.dbb39e0a.js"><link rel="prefetch" href="/blog/assets/js/24.f27f8467.js"><link rel="prefetch" href="/blog/assets/js/25.448302be.js"><link rel="prefetch" href="/blog/assets/js/26.78106ffa.js"><link rel="prefetch" href="/blog/assets/js/27.2a65554d.js"><link rel="prefetch" href="/blog/assets/js/28.55501022.js"><link rel="prefetch" href="/blog/assets/js/29.af733838.js"><link rel="prefetch" href="/blog/assets/js/3.df759ff3.js"><link rel="prefetch" href="/blog/assets/js/30.8ce1d72b.js"><link rel="prefetch" href="/blog/assets/js/31.7925ec43.js"><link rel="prefetch" href="/blog/assets/js/32.f9892d98.js"><link rel="prefetch" href="/blog/assets/js/33.afd7fd02.js"><link rel="prefetch" href="/blog/assets/js/34.ee49fe13.js"><link rel="prefetch" href="/blog/assets/js/35.0e4f5335.js"><link rel="prefetch" href="/blog/assets/js/36.96311e99.js"><link rel="prefetch" href="/blog/assets/js/37.fb3163b1.js"><link rel="prefetch" href="/blog/assets/js/38.778ed95b.js"><link rel="prefetch" href="/blog/assets/js/39.0531a2e1.js"><link rel="prefetch" href="/blog/assets/js/4.bb581d32.js"><link rel="prefetch" href="/blog/assets/js/40.ec9153c6.js"><link rel="prefetch" href="/blog/assets/js/41.2e9e71db.js"><link rel="prefetch" href="/blog/assets/js/42.af718b8a.js"><link rel="prefetch" href="/blog/assets/js/43.7a4efaa6.js"><link rel="prefetch" href="/blog/assets/js/44.21916db9.js"><link rel="prefetch" href="/blog/assets/js/45.c02e6427.js"><link rel="prefetch" href="/blog/assets/js/46.c95ab531.js"><link rel="prefetch" href="/blog/assets/js/47.d505fc9f.js"><link rel="prefetch" href="/blog/assets/js/48.9291572a.js"><link rel="prefetch" href="/blog/assets/js/49.79fd5fda.js"><link rel="prefetch" href="/blog/assets/js/5.cc289552.js"><link rel="prefetch" href="/blog/assets/js/50.40ff6888.js"><link rel="prefetch" href="/blog/assets/js/51.d16aa2b4.js"><link rel="prefetch" href="/blog/assets/js/52.4528f49d.js"><link rel="prefetch" href="/blog/assets/js/53.b16b42d4.js"><link rel="prefetch" href="/blog/assets/js/54.4fff7e01.js"><link rel="prefetch" href="/blog/assets/js/55.6832b1c5.js"><link rel="prefetch" href="/blog/assets/js/56.d16f1707.js"><link rel="prefetch" href="/blog/assets/js/57.de08e9ba.js"><link rel="prefetch" href="/blog/assets/js/58.6ca6f21b.js"><link rel="prefetch" href="/blog/assets/js/59.e518317a.js"><link rel="prefetch" href="/blog/assets/js/6.4efa9fa4.js"><link rel="prefetch" href="/blog/assets/js/60.935521f1.js"><link rel="prefetch" href="/blog/assets/js/61.ce9eda13.js"><link rel="prefetch" href="/blog/assets/js/62.e6c745bf.js"><link rel="prefetch" href="/blog/assets/js/63.647fd8d7.js"><link rel="prefetch" href="/blog/assets/js/64.4c9b4781.js"><link rel="prefetch" href="/blog/assets/js/65.80857907.js"><link rel="prefetch" href="/blog/assets/js/66.b89b796a.js"><link rel="prefetch" href="/blog/assets/js/67.b9798c32.js"><link rel="prefetch" href="/blog/assets/js/68.49b67f24.js"><link rel="prefetch" href="/blog/assets/js/69.665837ff.js"><link rel="prefetch" href="/blog/assets/js/7.b94332e9.js"><link rel="prefetch" href="/blog/assets/js/70.ce57ed8e.js"><link rel="prefetch" href="/blog/assets/js/71.71ae5067.js"><link rel="prefetch" href="/blog/assets/js/72.69c7c32d.js"><link rel="prefetch" href="/blog/assets/js/73.6b47b8f7.js"><link rel="prefetch" href="/blog/assets/js/74.bd6cd299.js"><link rel="prefetch" href="/blog/assets/js/75.297a83bc.js"><link rel="prefetch" href="/blog/assets/js/76.e49268ee.js"><link rel="prefetch" href="/blog/assets/js/77.6efa828f.js"><link rel="prefetch" href="/blog/assets/js/78.c38cb032.js"><link rel="prefetch" href="/blog/assets/js/79.478e1642.js"><link rel="prefetch" href="/blog/assets/js/8.80c6038b.js"><link rel="prefetch" href="/blog/assets/js/80.ff9e57e9.js"><link rel="prefetch" href="/blog/assets/js/81.e3dbf4d0.js"><link rel="prefetch" href="/blog/assets/js/82.270df640.js"><link rel="prefetch" href="/blog/assets/js/83.3bc7036f.js"><link rel="prefetch" href="/blog/assets/js/84.a3ccc99e.js"><link rel="prefetch" href="/blog/assets/js/85.7cdab723.js"><link rel="prefetch" href="/blog/assets/js/86.9f0c2ccd.js"><link rel="prefetch" href="/blog/assets/js/87.b7e93260.js"><link rel="prefetch" href="/blog/assets/js/88.557a99bb.js"><link rel="prefetch" href="/blog/assets/js/89.16a0d8d1.js"><link rel="prefetch" href="/blog/assets/js/9.4fbaf7a8.js"><link rel="prefetch" href="/blog/assets/js/90.52190781.js"><link rel="prefetch" href="/blog/assets/js/91.b9507740.js"><link rel="prefetch" href="/blog/assets/js/92.c0eb92c0.js"><link rel="prefetch" href="/blog/assets/js/93.ca3ba1d1.js"><link rel="prefetch" href="/blog/assets/js/94.a8ffcee7.js"><link rel="prefetch" href="/blog/assets/js/95.23fe688e.js"><link rel="prefetch" href="/blog/assets/js/96.b5d64bc6.js"><link rel="prefetch" href="/blog/assets/js/97.c41d4d64.js"><link rel="prefetch" href="/blog/assets/js/98.c415501d.js"><link rel="prefetch" href="/blog/assets/js/99.ab069b22.js"> <link rel="stylesheet" href="/blog/assets/css/0.styles.2dde6c16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/logo.jpg" alt="全栈修炼" class="logo"> <span class="site-name can-hide">全栈修炼</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">主页</a></div><div class="nav-item"><a href="/blog/views/" class="nav-link router-link-active">大前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/views/fe-advanced/ad2.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/blog/en/" class="nav-link">en-US</a></li></ul></div></div> <a href="https://github.com/GolderBrother/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">主页</a></div><div class="nav-item"><a href="/blog/views/" class="nav-link router-link-active">大前端</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/views/fe-advanced/ad2.html" class="nav-link router-link-exact-active router-link-active">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/blog/en/" class="nav-link">en-US</a></li></ul></div></div> <a href="https://github.com/GolderBrother/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/blog/views/" class="sidebar-link">大前端知识大集合</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GitHub 软技能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/github/follow.html" class="sidebar-link">GitHub 挖宝技巧</a></li><li><a href="/blog/views/github/star.html" class="sidebar-link">GitHub 吸星大法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器工作原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/browser/input-url-course.html" class="sidebar-link">导航流程：从输入 URL 到页面展示，这中间发生了什么</a></li><li><a href="/blog/views/browser/dom-bind-event.html" class="sidebar-link">一个DOM元素绑定多个事件时，先执行冒泡还是捕获</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/css/css-skills1.html" class="sidebar-link">10 个让你受益匪浅的 css 使用技巧</a></li><li><a href="/blog/views/css/css-knowledge.html" class="sidebar-link">你未必知道的 49 个 CSS 知识点</a></li><li><a href="/blog/views/css/css-knowledge2.html" class="sidebar-link">你未必知道的 49 个 CSS 知识点二~</a></li><li><a href="/blog/views/css/css-center.html" class="sidebar-link">一起搞懂 CSS 水平居中与垂直居中的 16 个方法</a></li><li><a href="/blog/views/css/css-flex.html" class="sidebar-link">弹性盒子中 flex: 0 1 auto 表示什么意思</a></li><li><a href="/blog/views/css/css-BFC.html" class="sidebar-link">CSS 中的 BFC 详解</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>移动端h5</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/h5/h5-demo1.html" class="sidebar-link">移动端 H5 和 Hybrid 相关基础技术概览</a></li><li><a href="/blog/views/mobile/mobile-skill.html" class="sidebar-link">总结移动端 H5 开发常用技巧</a></li><li><a href="/blog/views/mobile/mobile-optmization.html" class="sidebar-link">关于移动端体验优化经验总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/javascript/js-skills.html" class="sidebar-link">你可能不知道的 JS 开发技巧</a></li><li><a href="/blog/views/javascript/js-skills2.html" class="sidebar-link">一个合格的中级前端er需要掌握的 28 个 JavaScript 技巧</a></li><li><a href="/blog/views/javascript/js-utils.html" class="sidebar-link">书到用时方恨少，一大波 JS 开发工具函数来了</a></li><li><a href="/blog/views/javascript/js-utils2.html" class="sidebar-link">前端常用的 60 余种工具方法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/typescript/ts-demo.html" class="sidebar-link">TypeScript 高级用法详解</a></li><li><a href="/blog/views/typescript/ts-difficult.html" class="sidebar-link">TypeScript 重难点梳理</a></li><li><a href="/blog/views/typescript/ts-problem.html" class="sidebar-link">TS 常见问题整理（60 多个）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/vue/vue-ts.html" class="sidebar-link">Vue + TS + El 搭建博客及踩坑记</a></li><li><a href="/blog/views/vue/vue-lazyload.html" class="sidebar-link">vue 路由懒加载及组件懒加载</a></li><li><a href="/blog/views/vue/vue-skills-36.html" class="sidebar-link">Vue 开发必须知道的 36 个技巧</a></li><li><a href="/blog/views/vue/vue-interview.html" class="sidebar-link">30 道 Vue 面试题，内含详细讲解（涵盖入门到精通，自测 Vue 掌握程度）</a></li><li><a href="/blog/views/vue/vue-interview/part-one/note.html" class="sidebar-link">Vue 面试题汇总</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/react/react-hooks.html" class="sidebar-link">React Hooks 相关 API 总结</a></li><li><a href="/blog/views/react/react-lifecycle.html" class="sidebar-link">React v16.0 前的生命周期</a></li><li><a href="/blog/views/react/react-skill.html" class="sidebar-link">5 个技巧助你编写更好的 React 代码</a></li><li><a href="/blog/views/react/react-nice-library.html" class="sidebar-link">5 个很棒的 React.js 库，值得你亲手试试！</a></li><li><a href="/blog/views/react/react-interview.html" class="sidebar-link">35 道咱们必须要清楚的 React 面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React-Native</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/react-native/RN&amp;Native-message.html" class="sidebar-link">React Native 跟原生之间的通信</a></li><li><a href="/blog/views/react-native/ReactNative&amp;Flutter&amp;uni-app.html" class="sidebar-link">一、技术学习成本和难度</a></li><li><a href="/blog/views/react-native/ReactNative&amp;Flutter&amp;uni-app.html" class="sidebar-link">一、技术学习成本和难度</a></li><li><a href="/blog/views/react-native/codepush-config.html" class="sidebar-link">RN 配置热更新+使用文档</a></li><li><a href="/blog/views/react-native/codepush-deploy.html" class="sidebar-link">React Native + 热更新(Code Push) 部署文档</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/webpack/webpack1.html" class="sidebar-link">一大波 Webpack 面试题来啦~</a></li><li><a href="/blog/views/webpack/webpack-optimize.html" class="sidebar-link">webpack 优化篇</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端跨域相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/cors/corssOrigin-pro.html" class="sidebar-link">10 种跨域解决方案（附终极方案）</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>vite</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/vite/vite-study.html" class="sidebar-link">vite原理剖析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>cli</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/cli/james-cli.html" class="sidebar-link">手撸一个自己的前端脚手架</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/node/node1.html" class="sidebar-link">/views/node/node1.html</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端设计模式之美</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/fe-design/fe-design-9.html" class="sidebar-link">前端应知应会的 9 种设计模式(详细篇)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端数据结构之美</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/data-structure/data-structure.html" class="sidebar-link">前端数据结构之美</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端算法学习指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/algorithms/sort.html" class="sidebar-link">十大经典算法</a></li><li><a href="/blog/views/algorithms/interview.html" class="sidebar-link">面试必刷-《剑指 offer》刷题小结</a></li><li><a href="/blog/views/algorithms/string.html" class="sidebar-link">字符串相关算法</a></li><li><a href="/blog/views/algorithms/array.html" class="sidebar-link">数组串相关算法</a></li><li><a href="/blog/views/algorithms/linklist.html" class="sidebar-link">链表相关算法题</a></li><li><a href="/blog/views/algorithms/tree.html" class="sidebar-link">二叉树相关算法</a></li><li><a href="/blog/views/algorithms/tencent/array&amp;string.html" class="sidebar-link">腾讯算法题-数组与字符串</a></li><li><a href="/blog/views/algorithms/tencent/number.html" class="sidebar-link">腾讯算法题-数学与数字</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端面试集锦</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/fe-interview/alibaba.html" class="sidebar-link">阿里面试题</a></li><li><a href="/blog/views/fe-interview/bytedance.html" class="sidebar-link">字节跳动面试题</a></li><li><a href="/blog/views/fe-interview/bytedance-algorithms.html" class="sidebar-link">字节跳动算法题</a></li><li><a href="/blog/views/fe-interview/tencent.html" class="sidebar-link">微信面试题</a></li><li><a href="/blog/views/fe-interview/classic-layout.html" class="sidebar-link">掌握两大经典布局方案</a></li><li><a href="/blog/views/fe-interview/web-safe.html" class="sidebar-link">谈谈 web 安全问题及解决方案</a></li><li><a href="/blog/views/fe-interview/http&amp;https.html" class="sidebar-link">http2/http3 协议有什么优劣</a></li><li><a href="/blog/views/fe-interview/webpack-performance-optimization.html" class="sidebar-link">Webpack 性能优化你知道哪些</a></li><li><a href="/blog/views/fe-interview/webpack-principle.html" class="sidebar-link">说说 webpack 打包的原理</a></li><li><a href="/blog/views/fe-interview/webpack-HMR.html" class="sidebar-link">HMR 的原理是什么</a></li><li><a href="/blog/views/fe-interview/chrome-start-process.html" class="sidebar-link">Chrome 打开一个页面需要启动多少进程？分别有哪些进程</a></li><li><a href="/blog/views/fe-interview/dns-prefetch.html" class="sidebar-link">谈谈你对 dns-prefetch 的理解</a></li><li><a href="/blog/views/fe-interview/browser-cache.html" class="sidebar-link">浏览器缓存一探究竟~</a></li><li><a href="/blog/views/fe-interview/send-content-to-browser.html" class="sidebar-link">如何保证页面文件能被完整送达浏览器</a></li><li><a href="/blog/views/fe-interview/browser-render.html" class="sidebar-link">浏览器渲染过程是怎样的</a></li><li><a href="/blog/views/fe-interview/browser-reflow&amp;repain.html" class="sidebar-link">如何理解回流和重绘</a></li><li><a href="/blog/views/fe-interview/renderEngine-createNewLayer.html" class="sidebar-link">渲染引擎什么情况下才会为特定的节点创建新的图层</a></li><li><a href="/blog/views/fe-interview/UDP&amp;TCP-different.html" class="sidebar-link">UDP 和 TCP 有什么区别</a></li><li><a href="/blog/views/fe-interview/js-modules.html" class="sidebar-link">说说 js 的模块化</a></li><li><a href="/blog/views/fe-interview/lazyMan.html" class="sidebar-link">实现一个 LazyMan，可以按照以下方式调用</a></li><li><a href="/blog/views/fe-interview/handwriting-promise.html" class="sidebar-link">少年，来，手写一个 Promise 吧</a></li><li><a href="/blog/views/fe-interview/fetch&amp;ajax-diference.html" class="sidebar-link">请说下 fetch 和 ajax 的区别吧</a></li><li><a href="/blog/views/fe-interview/browser-input-url.html" class="sidebar-link">细说浏览器输入 URL 后发生了什么</a></li><li><a href="/blog/views/fe-interview/picture-optimization.html" class="sidebar-link">前端的图片优化方案你知道多少</a></li><li><a href="/blog/views/fe-interview/node-eventLoop.html" class="sidebar-link">来，说说 node 的事件循环机制吧</a></li><li><a href="/blog/views/fe-interview/browser-eventLoop.html" class="sidebar-link">小伙子，谈谈浏览器端的事件循环吧</a></li><li><a href="/blog/views/fe-interview/setTimeout&amp;setImmediate.html" class="sidebar-link">node中的setTimeout 和 setImmediate有什么区别</a></li><li><a href="/blog/views/fe-interview/js-interview.html" class="sidebar-link">收集一些 javascript 相关的面试题</a></li><li><a href="/blog/views/fe-interview/fuck-interview.html" class="sidebar-link">那些恶心的面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端必知必会的网络基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/network/http-interview.html" class="sidebar-link">HTTP 灵魂之问，巩固你的 HTTP 知识体系</a></li><li><a href="/blog/views/network/tcp-interview.html" class="sidebar-link">TCP 协议灵魂之问，巩固你的网络底层基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端应知应会的Nginx知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/nginx/nginx-details.html" class="sidebar-link">Nginx 从入门到实践，万字详解！</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端必不可少的git知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/git/git-command-animation.html" class="sidebar-link">相见恨晚的 Git 命令动画演示，一看就懂！</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端性能优化专题，让你的网站飞起来吧</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/performance/code-split.html" class="sidebar-link">项目不知道如何做性能优化？不妨试试代码分割吧</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端高手进阶专题，告别小菜鸟</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/views/fe-advanced/ad1.html" class="sidebar-link">你真的熟悉 HTML 标签吗？</a></li><li><a href="/blog/views/fe-advanced/ad2.html" class="active sidebar-link">如何高效操作 DOM 元素？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#什么是-dom" class="sidebar-link">什么是 DOM</a></li><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#会框架更要会-dom" class="sidebar-link">会框架更要会 DOM</a></li><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#为什么说-dom-操作耗时" class="sidebar-link">为什么说 DOM 操作耗时</a></li><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#如何高效操作-dom" class="sidebar-link">如何高效操作 DOM</a></li><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/blog/views/fe-advanced/ad2.html#最后" class="sidebar-link">最后</a></li></ul></li><li><a href="/blog/views/fe-advanced/ad3.html" class="sidebar-link">3 个使用场景助你用好 DOM 事件</a></li><li><a href="/blog/views/fe-advanced/ad6.html" class="sidebar-link">浏览器如何渲染页面？</a></li><li><a href="/blog/views/fe-advanced/ad7.html" class="sidebar-link">关于 JavaScript 的数据类型，你知多少</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何高效操作-dom-元素？"><a href="#如何高效操作-dom-元素？" class="header-anchor">#</a> 如何高效操作 DOM 元素？</h1> <p>本篇文章我们主要介绍高效操作 <code>DOM</code> 元素相关的内容。</p> <h2 id="什么是-dom"><a href="#什么是-dom" class="header-anchor">#</a> 什么是 <code>DOM</code></h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document_Object_Model" target="_blank" rel="noopener noreferrer"><code>DOM</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（<code>Document Object Model</code>，即文档对象模型）是 <code>JavaScript</code> 操作 <code>HTML</code> 的接口（这里只讨论属于前端范畴的 <code>HTML DOM</code>），属于前端的入门知识，同样也是<strong>核心</strong>内容，因为大部分前端功能都需要借助 <code>DOM</code> 来实现，比如：</p> <ul><li>动态渲染列表、表格表单数据；</li> <li>监听点击、提交事件；</li> <li>懒加载一些脚本或样式文件；</li> <li>实现动态展开树组件，表单组件级联等这类复杂的操作。</li></ul> <p>如果你查看过 DOM V3 标准，会发现包含多个内容，但归纳起来常用的主要由 3 个部分组成：</p> <ul><li>DOM 节点</li> <li>DOM 事件</li> <li>选择区域</li></ul> <p><strong>选择区域</strong>的使用场景有限，一般用于富文本编辑类业务，我们不做深入讨论；<strong>DOM 事件</strong>有一定的关联性，将在下一篇文章中详细讨论；对于 <code>DOM</code> 节点，需与另外两个概念<strong>标签</strong>和<strong>元素</strong>进行区分：</p> <ul><li>标签是 <code>HTML</code> 的基本单位，比如 <code>p、div、input</code>；</li> <li>节点是 <code>DOM</code> 树的基本单位，有多种类型，比如注释节点、文本节点；</li> <li>元素是节点中的一种，与 <code>HTML</code> 标签相对应，比如 <code>p</code> 标签会对应 <code>p</code> 元素。</li></ul> <p>举例说明，在下面的代码中，<code>p</code> 是标签， 生成 DOM 树的时候会产生两个<strong>节点</strong>，一个是<strong>元素节点 p</strong>，另一个是字符串为<code>&quot;前端超神路&quot;</code>的<strong>文本节点</strong>。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>前端超神路<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="会框架更要会-dom"><a href="#会框架更要会-dom" class="header-anchor">#</a> 会框架更要会 DOM</h2> <p>有的<code>前端er</code>因为平常使用 <code>Vue、React</code> 这些框架比较多，觉得直接操作 <code>DOM</code> 的情况比较少，认为熟悉框架就行，不需要详细了解 <code>DOM</code>。这个观点对于初级工程师而言确实如此，能用框架写页面就算合格。</p> <p>但对于屏幕前想成为高级/资深前端工程师的你而言，只会使用某个框架或者能答出 <code>DOM</code> 相关面试题，这些肯定是不够的。恰恰相反，作为高级/资深前端工程师，不仅应该对 <code>DOM</code> 有深入的理解，还应该能够借此开发框架插件、修改框架甚至能写出自己的框架。</p> <p>因此，这篇文章我们就深入了解 <code>DOM</code>，谈谈如何高效地操作 <code>DOM</code>。</p> <h2 id="为什么说-dom-操作耗时"><a href="#为什么说-dom-操作耗时" class="header-anchor">#</a> 为什么说 DOM 操作耗时</h2> <p>要解释 <code>DOM</code> 操作带来的性能问题，我们不得不提一下<strong>浏览器的工作机制</strong>。</p> <h3 id="线程切换"><a href="#线程切换" class="header-anchor">#</a> 线程切换</h3> <p>如果你对浏览器结构有一定了解，就会知道浏览器包含<strong>渲染引擎</strong>（也称浏览器内核）和 <strong><code>JavaScript</code> 引擎</strong>，它们都是<strong>单线程</strong>运行。<strong>单线程</strong>的优势是开发方便，避免多线程下的死锁、竞争等问题，劣势是失去了<strong>并发能力</strong>。</p> <p>浏览器为了避免两个引擎同时修改页面而造成渲染结果不一致的情况，增加了另外一个机制，这两个引擎具有互斥性，也就是说在某个时刻只有一个引擎在运行，另一个引擎会被阻塞。操作系统在进行线程切换的时候需要保存上一个线程执行时的状态信息并读取下一个线程的状态信息，俗称上下文切换。而这个操作相对而言是比较耗时的。</p> <p>每次 · 操作就会引发线程的上下文切换——从 <strong><code>JavaScript</code> 引擎</strong>切换到<strong>渲染引擎</strong>执行对应操作，然后再切换回 <strong><code>JavaScript</code> 引擎</strong>继续执行，这就带来了性能损耗。单次切换消耗的时间是非常少的，但是如果<strong>频繁的大量切换</strong>，那么就会产生性能问题。</p> <p>比如下面的测试代码，循环读取<code>一百万</code>次 <code>DOM</code> 中的 <code>body</code> 元素的耗时是读取 <code>JSON</code> 对象耗时的 <code>10</code> 倍。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 测试次数：一百万次</span>
<span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">;</span>
<span class="token comment">// 缓存body元素</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
<span class="token comment">// 循环赋值对象作为对照参考</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> tmp <span class="token operator">=</span> body<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object: 1.77197265625ms</span>

console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 循环读取body元素引发线程切换</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> tmp <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'dom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// dom: 18.302001953125ms</span>
</code></pre></div><p>虽然这个例子比较极端，循环次数有些夸张，但如果在循环中包含一些复杂的逻辑或者说涉及到多个元素时，就会造成不可忽视的性能损耗。</p> <h3 id="重新渲染"><a href="#重新渲染" class="header-anchor">#</a> 重新渲染</h3> <p>另一个更加耗时的因素是<strong>元素及样式变化</strong>引起的再次渲染，在渲染过程中最耗时的两个步骤为<strong>重排（<code>Reflow</code>）<strong>与</strong>重绘（<code>Repaint</code>）</strong>。</p> <p>浏览器在渲染页面时会将 <code>HTML</code> 和 <code>CSS</code> 分别解析成 <code>DOM</code> 树和 <code>CSSOM</code>(CSS Object Model) 树，然后合并进行排布，再绘制成我们可见的页面。如果在操作 <code>DOM</code> 时涉及到元素、样式的修改，就会引起渲染引擎重新计算样式生成 <code>CSSOM</code> 树，同时还有可能触发对元素的<strong>重新排列</strong>（简称<strong>重排</strong>）和<strong>重新绘制</strong>（简称<strong>重绘</strong>）。</p> <p>可能会影响到其他元素排列的操作就会引起<strong>重排</strong>，继而引发<strong>重绘</strong>，比如：</p> <ul><li>页面渲染初始化时（这个无法避免）</li> <li>修改元素边距、大小、位置、内容</li> <li>添加、删除可见的 DOM 元素</li> <li>改变窗口大小</li></ul> <p>与之相反的操作则只会引起<strong>重绘</strong>，比如：</p> <ul><li>设置背景图片</li> <li>修改字体颜色</li> <li>改变 <code>visibility</code> 属性值</li></ul> <p>如果想了解更多关于重绘和重排的样式属性，可以参看<a href="https://csstriggers.com/" target="_blank" rel="noopener noreferrer">这个网址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>下面是两段验证代码，我们通过 <code>Chrome</code> 提供的**性能分析工具(performance)**来对渲染耗时进行分析。</p> <p>第一段代码，通过修改 <code>div</code> 元素的<strong>边距</strong>来触发重排，渲染耗时（粗略地认为渲染耗时为紫色 <code>Rendering</code> 事件和绿色 <code>Painting</code> 事件耗时之和）<code>3045</code> 毫秒。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  html <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> html<span class="token punctuation">;</span>
<span class="token keyword">const</span> divs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>divs<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">div<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'10px'</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/blog/assets/img/1.3ff1480a.png" alt="ad2-1"></p> <p>第二段代码，修改 <code>div</code> 元素<strong>字体颜色</strong>来触发<strong>重绘</strong>，得到渲染耗时 <code>2359 ms</code>。</p> <p>代码长这个样子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  html <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> html<span class="token punctuation">;</span>
<span class="token keyword">const</span> divs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>divs<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">div<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'red'</span> <span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="ad2-2"></p> <p>从两段测试代码中可以看出，<strong>重排渲染耗时明显高于重绘</strong>，同时两者的 <code>Painting</code> 事件耗时接近，这也应证了<strong>重排会导致重绘，但重回不一定导致重排</strong></p> <h2 id="如何高效操作-dom"><a href="#如何高效操作-dom" class="header-anchor">#</a> 如何高效操作 DOM</h2> <p>明白了 <code>DOM</code> 操作耗时之处后，要提升性能就变得很简单了，<strong>反其道而行之，减少这些操作即可</strong>。</p> <h3 id="在循环外操作元素"><a href="#在循环外操作元素" class="header-anchor">#</a> 在循环外操作元素</h3> <p>比如下面两段测试代码对比了读取 <code>1000</code> 次 <code>JSON</code> 对象以及访问 <code>1000</code> 次 <code>body</code> 元素的耗时差异，相差一个数量级。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'switch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'switch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.873046875ms</span>
<span class="token keyword">var</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'batch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  body <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'batch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.846923828125ms</span>
</code></pre></div><p>当然即使在循环外也要尽量减少操作元素，因为我们不知道他人调用你的代码时<strong>是否出于循环中</strong>。</p> <h3 id="批量操作元素"><a href="#批量操作元素" class="header-anchor">#</a> 批量操作元素</h3> <p>比如说要创建 1 万个 <code>div</code> 元素，在循环中直接创建再添加到父元素上耗时会非常多。如果采用<strong>字符串拼接</strong>的形式，先将 1 万个 div 元素的 <code>html</code> <strong>字符串拼接</strong>成一个完整字符串，然后赋值给 <code>body</code> 元素的 <code>innerHTML</code> 属性就可以明显减少耗时。</p> <p>就像这个样子</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'createElement'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'createElement'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 54.964111328125ms</span>
console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">'innerHTML'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  html <span class="token operator">+=</span> <span class="token string">'&lt;div&gt;&lt;/div&gt;'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> html<span class="token punctuation">;</span> <span class="token comment">// 31.919921875ms</span>
console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">'innerHTML'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>虽然通过修改 <code>innerHTML</code> 来实现批量操作的方式效率很高，但它并不是万能的。比如要在此基础上实现<strong>事件监听</strong>就会略微麻烦，只能通过<strong>事件代理</strong>或者重新选取元素再进行单独绑定。批量操作除了用在创建元素外也可以用于修改元素属性样式，比如下面的例子。</p> <p>创建 <code>2 万个 div</code> 元素，以单节点树结构进行排列，每个元素有一个对应的序号作为文本内容。现在通过 <code>style</code> 属性对第 1 个 <code>div</code> 元素进行 2 万次样式调整。下面是直接操作 <code>style</code> 属性的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>html<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> html<span class="token punctuation">;</span>
<span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'red'</span> <span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">;</span>
  div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="ad2-3"></p> <p>如果将需要修改的样式属性放入 <code>JavaScript</code> 数组，然后对这些修改进行 <code>reduce</code> 操作，得到最终需要的样式之后再设置元素属性，那么性能会提升很多。代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> times <span class="token operator">=</span> <span class="token number">20000</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>html<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> html<span class="token punctuation">;</span>

<span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//  创建缓存样式的数组</span>
<span class="token keyword">let</span> microTask<span class="token punctuation">;</span> <span class="token comment">// 执行修改样式的微任务</span>
<span class="token keyword">const</span> <span class="token function-variable function">st</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 合并样式</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>acc<span class="token punctuation">,</span> <span class="token operator">...</span>cur <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> style<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    div<span class="token punctuation">.</span>style<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> style<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  microTask <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">setStyle</span> <span class="token operator">=</span> <span class="token parameter">style</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 创建微任务</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>microTask<span class="token punctuation">)</span> microTask <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
    fontSize<span class="token operator">:</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>
    color<span class="token operator">:</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'red'</span> <span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
    margin<span class="token operator">:</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token string">'px'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">setStyle</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从下面的耗时占比图可以看到，紫色 Rendering 事件耗时有所减少。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS8AAAC4CAYAAACyymqXAAAgAElEQVR4Ae1d2ZIct5X1P/mP/BPz4pkIjWfCMfMwYVtjWRIpUSspWbYkUiLZZK9kb2ySve9b9Vpr7y2Ji0gRjlPSoW6hM7OyqoCszKqLiGzswMUB7mkgK/Pmb4w6RUARUAQyiMBvMiiziqwIKAKKgFHy0kWgCCgCmURAySuT06ZCKwKKgJKXrgFFQBHIJAJKXpmcNhVaEVAElLx0DSgCikAmEVDyyuS0qdCKgCKg5KVrQBFQBDKJgJJXJqdNhVYEFAElL10DioAikEkElLwyOW0qtCKgCCh56RpQBBJC4I9Xp0zcKyGRMt2Nklemp687hD86OjK//e1vX19ra2uvB37p0qXX6SgzNjZWzYMv66Ac3e9+97uaPLSfhANx/el2ue6FclEO8vuQGW2ibTjiFyVHu/OUvNo9A9p/XQSuX7/+ugyIiwqGRJASCet1oV+UTxKWzPOl/LKPoHCWyCtI/rSlKXmlbUZUnroIYEdF98Ybbxi5E2M6CE+SHtPhy/oy3XdYycstwkpebvHU1jwjII826ArkxeMhwnQgLqbbZCXTwwiO5IddGsojzqMU4pIwpQxBu0DK5Ju87DHzaAk/bMyyDsLc1WJ8xJNheURn2xgbMSJOYTte4uDKV/JyhaS2kwgCUBRJHLJT5EEBbQdloiLKPCp1UHtUapRhOSolCIrtIcx02XZQ2Cd5QQ4SD/rGmEAmQY7pdh2Mg22QsGRbKA8HbDhm+AwjD/VlvFrB0x8lL0/AarNuESCBwA9zUuHsMlRYOx2KGER4djqUkn3Dp5JTrqA27L58khcIg+TCfkGwJGbkAwNeKGPXkeOSWMow6sm4xAV5kEHJizOgftcjAGUhWUSBIZXKLueLvNgPyAt92ATCfPjtIC8QEshEkiuxQDowo2uWvFgfvpKXREPDXY8AdhBQrHoOBBdEHlDSoN0A2oQiB7Udd+clZaqnuD7JC31LgpeEj7ETF/gkL4yRx1+MA+XYhvxHIMMoJ+OoL4kR9YOwlji5Cuux0RWS2o43BKAQUDh5URllmlQiKBXzpIJC8ZgOH/EgF5e8SAZsM6gtprkkL/YHn+OGL9PZrxwziAVl6CROqN8oeaEd2SfaUPIiuuorAh2CAMgr7pXVIYO8cCXhdOeVBMrahyLQBQjwGB62m3UNgZKXa0S1PUWgixDALkseG3mcTwICJa8kUNY+FAFFwDkCSl7OIdUGFQFFIAkElLySQFn7UAQUAecIKHk5h1QbVAQUgSQQUPJKAmXtQxFQBJwjoOTlHFJtUBFQBJJAQMkrCZS1D0VAEXCOgJKXc0i1QUVAEUgCASWvJFDWPhQBRcA5AkpeziHVBhUBRSAJBJS8kkBZ+1AEFAHnCCh5OYdUG1QEFIEkEOgI8vrpp5/MkydPzMnJiSmXy6ZUKplKpVINI4633fumCub+bN48WMyb6dW8WdosmK29crUO6qINdYqATwSWev/NxL18ytEpbWeOvF69emXOzs6qxASCOj09NT/88IN59uyZ+fHHH0OvqI99vttfNn8fLZmex0UzvpA3a9ulah/oS126EaBxPVg2kEYHKTXSpHE8aXyP1hCC6rG+Sx/E9d3s7+teKBflpHFBjKER16zZmmbrNSJbo2UzQV5Pnz59TVYgrufPn4eSVBiBRZFXWN7H90qmd6pgVraKBjKoSx8C0vAdSIgmWWjh1CYvewTIT8r+lAvyAonQ2inGgjjHbI+t1XiS2DQja2rJCzupQqFgtra2qsQRRkpx08MIKm76laGy6XlcMMu5YnWX1wzYWscvAkFWPJEmd15SApAWFDQp54K8IHPYeFyPQ8mrQUSPj4/Nzs6O2d7eNrlcrnrVOxLGIbC4JBWn3Ef3yubBwr45Pj5pcHRa3CcCUGp7FxJFXigftusiEdJ+PuLczeGoJutByXkEtfuX43VBXmgPfUGeIIcxURaSHMvD5/GPdZEmx8U6ckzc6aEsnV1PjlvKADlZn3Vd+anZeeV2tquEhZ0WSYs+AI9DUFFl4pBSo2WuDFXM8FzBlMoVV/Oh7TSJAJQnaBcF5aFCyqbt45fMQxj1qOxUeLYj+0KY6XYbdtwVeaFdkoskUcgRJAvGIcnOJiFZB3lsE30wjD7D6qEMCQp4MIw6aFvGbUxaibedvAr7FTN2t2SuXz4067nNC8RFAosipjh5jRJTI+UvDVTMwHTBFEpKYq0sxmbrhikt2gsjL6RLhbb7tvOhgCAxOEl8JLaotti2S/JimyAUEAaclJH58CXp2HE7T467HnkF9YG5oDzIl1jJ8i7CbSOvo4NT86C/aL55/9B89c5B9Roamwslr2Zu0ktSa4SMmi3717tlc2eyUH38wsXkaBv1EYCCSWWxa0AZ5c6C+ahHMmKa9KUSI10SQ5BCorwkEtkWwz7IC7sejMWWkX3CtwlKxmUYZTEO4tksecndWhBWUrZWwomTF+5fzU4UzM0PfiUtktfX7x6Y3PbP97m446KPRyIkGTUabpaQmqn33mCl+iwZCFedPwSgJEHEJHsMIq84CtUoeaFPKH2UPC7IC31IcpDjQ99B/dsEJeMIk6yAC+Lw4dAW8xC361UL/fKHeZCHZMo2OuLYuL9bMQNfll/vtEha0h+dnAncfe3u7maGvEh4NyaKJl/Uo6Rc5C7DUCwojbxsRZHKzb7lboVpth+XvGwZ7HZk3AV5oT2MkWOWRIE8xJlHIkNcOhlHGOVYR5IVx0ZM7XphbUoZgCPry/IuwonsvLBLmhotmhvv/3w8lGRlh69fOjBb2xdv2mMH1srRkYSStP9uf8U8XNqvEq+LCdM2sosAyCvuldQoJSH56DPOP4pm+/VOXri31f/P6N2WTWCjU48Dd1+tHB2TJi27v5uPiubk5LTZedJ6ioAXBHyTF3Zd2H35cF7Ja2ujaG5/Un+3ZZPX9Stls73z63NevO/VytHRJpN2xD8bKZu9fNHHPGqbikBTCLgmL+y00CYvHl2bEq5OJW/ktTRTiHVMtImL8dHZh4G7r2aPju0gq6A+8WzYam6/zrRotiKgCNRDwAt5zT4sRN6UJ0FF+d9c3Q+899Xs0TGISNqV9lZv2cysKoHVW5yarwhEIeCUvGBWxgVxkdQeLUxd2H01e3RsF1FF9TsyX1BTPFGrU/MUgQgEnJEXiGt6vPUdF4kL/rdfbNW848h7X80cHaNIpJ15o/N5JbCIBapZikAYAs7Ia37SLXGRxOZWFi/svpo5OraToKL6/nNP2TxezofNj6YrAopACAJOyGt5Lm/wfBYJx6Xf883aBfJq5ugYRSDtznvzTsXMrCqBhaxRTVYEAhFombzWlws17ye6JC62tbC2fIHAGj06tpug6vX/Vm/FLG0qgQWuUk1UBAIQaIm8dnIlc/PDi+8oknRc+Xd6Wj861iOPNOS/01cx69v6HFjAOtUkReACAk2TFwzx9VyteDkqBpHe2uZGze4r7OgIc83ff/+9OT8/NzBsyGtyJV+1T4+PcPRPFwyeeP9wqGTSQFpShiuD5apd/gszpQmKgCJQg0BT5IV3FUd7iokRF8hsaHihhrzwyyO++sOvBuFN+O+++868fPmyZoBREZQ9OT03M2v4+EbBXBlMB5ndfFjQdyGjJk7zFAFjTFPktTCZT5S4uBPb2PrZXA5MRGPnhU+duXb75RMzOJM3n95vL5FNr+j9L9dzq+11FgINkxcsn34bYIuLBOPTH5yYqH6U48WLF95nAX2sbJXMl+NF85eecuLHS1ijUHM63qdZO8gwAg2RF37hG75ZSnzXdffzssmtldsG8/Z+2dyYKCROYF+Ol/RLRW2bdfcdf/B/Mybu5b73zmuxIfJank32uHjzo0rV6moavmYNGebW8+b9wWR3YfgIrrpwBKQVA9swHy0b2JYTpDE/X+ZagiQGccU5maBclJPyY2zSgGBUvbh5aJ/WVOPWgfUIG/+4dZstF5u8jo6Oze1P/D8Wgcm98d6hmeiH/auzZsflrd7p2Xn1Q7R4sFT+SugrjK95H6sdsND5hKKBwOCgPCQjpFOpkUbFQlmWRx0of6OKGipMnQyX5EWZ4bseQzPkVWfoXrJjk9eDvmR+Xfz2gwOznoHXZbALg3UIX6Ql2x2c1t1X2OqXuyqQFXYAUGgooHSynEwHqUkyk3muwz7ICzJiDCQzFzJ3FHnB9ryv13/kNhrEtbVRcoF/Im2s75TN2wkQ2N96K/pZtZAZleSDMAgsiLzCFDIsHbs1XMgH8SGMthHGJQkP/TKdu70gcX2QF+SAjHSQk7JALjqkSfmlnGiDdUD+EhOZhzJ0aJt9oS2EccFxHmSbrCdlsPtimbh+rJ3XaI//m/S4v5XfPYwrd2rK7RQOzaV+/zuw3qlCasacNkGClAQKSAWlwti7EygPFc4eExUTdXChD5SHQ3skBoSZbrdhx12SF8dMOSiXlAVjIAZSfkl4HBuxkVghTRIj6rF99Cv7Rl/EEumyHvpGW1F92VjFidclr71t/0/Rg7hKheM48qayzF7xyPsO7K93K2av0L5fXNMIPJWBskkiYR4Uh8qENDpJbkyTvlRGpKM868OncrIfKq5sww67JC/KQmJAXyAWxOVFskGadIxLzJjPsZLIZHscNzAFmdFJvOw8xqP6YjuN+HXJy/eu6/rlA7Oby96OywZ5c//Q+z0wPHmv7lcEgpSBSvlrqYtfbUYZKr8sJ8NSGZFOhUZYkhfroDzahUxhzgd5oT+QAxyIKqx/GxfGUd4mXo4VeSQ/e0wkJKZLvOw8xqP6YjuN+JHkdVg5Mdcv+/2FcWmmc3YTi7mS8fkrJNo+OHL/VkEjCyZNZXk/hjJBObgzYBp8KA/y4KBkDMsydlgqI/Ko0AgHkRfS0W6YsiPfB3lRNmARNn6UIVkhDMd4EIbIwxhxMfxLtdceCYkJEi87j/GovthOI34keT0e9mNgkDfpHw5m5+Z8XFDHF/0+zDo8p788yrmA0kDBeDEPCsM0lKEDuTCdfhDhSGVE3TDyAmGwHfhRzhd5UQb0bY8PhAFnyybjEkPUl2Nl2xwjsSQhcbwSLztPxqP6Yltx/VDyevbsmVerEQNfdR5xEfSvxoveHqG4OlzWp+4JdMZ8kFfcK2NDa1pcSaKNNhJKXutL/n5h/ObKgTk5Pm9U1syUPz499/oLZG63c4k/M5OsgraMAHZ52JU160LJy6fJm6nRzje4N7uW97b7ujupR8dmF7zWay8CPH7CD7o/2Yh0geQFg36+XgW6/Wm5K76Wg3chPx/xc3y8PFA2mCN1ikA3IxBIXrk1f0fG9cXO+XWx3sLBE/j4OpB81cdVeDnX+bvXevhqfncjEEhej4b8vMfYyTfpw5aRr5v392b1ma8wzDW9OxC4QF6vXr0yfV/4eap+c7X7bjQv5/xYZIWtL8yVOkWgWxG4QF4wQ/P1u+6/wXj7kwOThAXUtE0kxuzDBhgsrZ6dpc9kUNrwV3k6F4EL5LW+7Od+18Rg996j6Zvy8+Dqxk73Ytq5Kqkji4vABfKaHPHzVH1xv3tfaylUTr3ctB+d10cm4i50Ldd5CFwgr5Fb7ndedz+rdB5yDY7o43vu733dmNCdV4PToMU7CIEa8sKzSSAavnvoyn90T38Zu/XI/UOrn9wvdcUzcx2kbzoUhwjUkBc+4HrjPfc36zdXuufZrrC5mVpzv/N6b7BS/ehuWJ+argh0MgI15HV0eOJ814XdWye/xxh3cRydnDu/74XvSfr48G7cMWk5RaCdCNSQ1/Zm2Tl53fzwwLx8+bKdY0xF38Dg3T73T9vv5XVXm4oJViESR6CGvFbm3D9Z3/cPVS7O6if33L/ruJLT+4nEN+3+H7/8DxP3SvtY0iBfDXnNP3b/mMTI7cafqpdvnsMYmnQyT6YzDGNn0swGrUG6eIudfTTrf+nBztfUij4u0cx80Kon1kdSDsT1p3v/XfdCuSgHawxSD2hwMKxOs6Zn0A+ND4a13c507+TV6C+NND8LULjACBDAJJnZJMUymFRJXqjDycUktnMyeh67f1hVn/XizMf3sSawRrBWskpelNvWkfgoXCwJTKgrF3PTl1JLXpN55/e8YEq6FYcFBofJwqKTjnlMIzmRvDARDKMM4nYbrJuEf2/W/eMSI/Ot4ZvEuNPaRyeQF7B1RTqu2klqvmvIa2HKPXk9utf8g5TYZZF8gsgLRCT/A4G8JGFhl2XvtGzCA9Csg/rIR59oF2Fcsg2EmY7yjbj7c+53XiNz+42IoGUFAphHrh+RXA1y7WCNcQ1Ie+5YM3RYL1wTPBkwT/ouj41Sbq5Xrl/Kwr45FsRRVo6Da1iOgf/gkcZxok1ZT45TpqM9qZeUwYdfQ16LM/vOd14PhxonL04CgeXAAQpBI2CcRIALRyJCWE4a22A5xlmHk4M4+uEEksSQjjDTZf244Xuz7m/Yjy/oPa+4+NvlMOdcP3Ye/0khn2uA6xFrD4oNhzDT7TbsuA/yQv9Ba1KufRmG3LK8xECSFWSXcZTjOKFjbIPYEEdbL20MXMZryGt5zj15TfQ3Tl4coA0EgQKQnASkSZCbJS+0QYdJQt90mChODsKyLMvE8Qdm3O+8JhaVvOJgH1RGKq6dLxUeeXINYC3Yyovy9ZxL8oLsvNiv1A/kUSY5FqkrqCfjMmznoT3pGIeekNSYL7Fimg+/hrxWF9wfG8d7W7snYxMJQeACAllxEqUPAAGsJBpJbGwHvp1u92lPBvu0J022GRT2YV3i0ZKSVxDWcdKwXvhPyS4vFR55cg1w7ck6KI/25D89mY+wS/Ky5UYc/dNJ+WU4iqCi8mTb6INxjBftSyexkumuwzXktb7snrzG7ja287InHyDZEwUQALRdFuk2Ecn6NikRTLuOXS5oMoIWMNsL828+cn9snNRHJcLgrpsu14ZdWCo88uQaCJt7rMeof2i+yQsy0iFMUpFjiSIoe93LsiQrts84/5EzHRhE4cpyLvwa8tpcc/+Q6tCNxh5SBdAYPC+AQwcwmc6JYR59m4gILuqFLSy7jj2JXLj870YZpGzsP8q/NuyevGbXGvvnECVft+VhHoP+MQIHqfCIcw0gLMmLyso1EYWhT/JCv1I/sIapI3IskpBYh+uYYyEJyrIYn3QyjvY5fvQrsZJ1XIdryGsn5/71oFsf6+tBmDS8HnSp3/3rQfjIh7psIADyintlY0TBUkpiCy7hJrWGvI6OTryYgD4+6twPzMadhpPTM+cvZuPLRMfH3WvkMS72Wi45BLDzwo4tCVdDXjCJc/cz9yZxVuZ0dzC/4X7XdWVITeIkoSTaRzQCPDLC55Ezuoab3BrygjHCkVvuj44PBlr7xdHNUNvbig9jhF+MdccHfNs7c9p7WhGoIS8IOTni/qb9+O3ttI4/MbmuDLo3Rnj7sf5TSGwCtaPUIXCBvFw8qHr90oEZ/mrPLA+Pm8PJP5nvZn9vTg93Uzf4pAQqHZw4v9+FL2/re41JzaD2k0YELpBXPl9s6qY9jA4+vL1pcmO3zenUG1XCAmnxOlj7Ko3jT0QmH0/Wg7wWNxs3N5TIgLUTRSABBC6QFz5k2vv5Yax3HPuulc1s35zZn/jYnM/8+2uiImFJ/2zhf7r2o7OX+90fGf96t6wfnU1AQbSL9CJwgbzwCfmwm/ZfXzow97/aNyv3H5iDyT9HkpUkLoYPdn59XzC9kLiVbG7DPXFh1/XP8aLBXKlTBLoVgQvkBSDkh2e//eDATNzKmc3RHnM69Z8NExaJC/7x0uWuw/kfY+6fqq/e75rTdxq7bjHpgGsQCCSvjZWimb47Z3bHP22JrCRxMXywv1AjQCdHcnvun+0CceHa3tPXgjp57ejY6iMQSF5Pnz41Z4s//0pI0nHlnyy91RUfSsUzc5+P+Nl1fXivbDBH6hSBbkYgkLwASGmjz/muiwR4sHGr4zHHhzG4S3Lt336kz3d1/ALSAdZFIJy8CjveyOu7+T+Y89ODusJltcDp2bm5PODvyLi6pUfGrK4NldsdAqHk9ezZM3Oy5v6eF3dfRysfuxtFylryYbeLu7drI2WDuVGnCHQ7AqHkBWAKmw+87L6+X/gvMzE1bMYWOu/4M7Hk3tQziQv+gwX94EZWlRb2suJeWR1jknJHktfJyYk5X/xfpwR2tvym+ex+rno/6C89ZTO/0TlPia9slcybd/wdF9/tVxM4cZRDGqCUFg9odA+WD2R6mEHCOH01UgbElcvl6l4oF+Xs8UWV7eS8SPLCwCvrN52R197K9Qs3sf/WWzHb+cPMY7xXPDKXBioXxid3Ta2G+6c7b6eaxMRD2aWNqaQsfdpjc0Fe0oor2ke8HtnZciAuraQG5WchrT55lfZaJi8cE8enH4cqNnYUu8XkPrvuemL2S8cGY2iVnKLqv3mnYvYKahetmbmzFRW7rnY4F+QFIobBv1adjUmr7bWjfl3yglC4uc4b7Y36Z0tvmmu/HBOjlPOdvrLZymePwKo7Ls/EBdyuT+gvjM0oCHYmcteFNuSRkXbe7bZp951HTMRBPqzLIyjqoX2mR+2CXJAX5bflhpyyb4RJcpQNPvFgGurBhR1FMTa0xfIkT8arldv0JxZ5VbD7mv9DwwS2v3K9oXtAf+stm9Xt7NwDw/26t3v97rhAXHgJe69QadMSyXa3UGCp1HI0UGQooSQi5oMckIcyLEcyQHskREkSrBvmo6yLe15on4RJ2W05kA+5w8aPfNZFOZIY2iZBsR/moQ9gAh8ObdskWs1I6E8s8oIsjTy0imPi8NR8U8eot3rL5mEGvkV4d9Lvr4pylzowre8xNqsPULYoB+ULUkA7HQoMJYeTyo4w+ghqw+7XJXmxbUkmHCtkkuSKdBIV60nyIimhHC8Sliwnx412UI+EznaT9GOT1+npqTlfebvu7uts9ZL5+F7rT5ffmCia49OzJLGI1Vf58MxcHfZjKUISFsPvD5YNfvVV1zgCcgcRVtsmKZaz08PIS5aH4nNXwnTp+yAvjJFEBZnRB33ZN8pAPhAQnCSlKBKS5TJLXhhwYWs6krx2VnsaOiZSQcP89wbKZmE9n4p3IV+8/Mn0TxerR7gweX2kTy7rc11SCRsJhx2Z2AaUUSo00+E3Sl6oE0UCzG/12Ig+5C4KcnL3g/GAbLhrkuNBWOIhw1E4dAx54cnuw/WvLxAYjon3J+eaOibWU3g8C/b1g6LZ2mvfL21Ta2Xjw6BgvbF/MVYyz58/t9egxmMiIBWPVaD4PBrBl0TAMvDjkhfIRLYn27DDKNsqeaFNkBP7xBilQ5xkhnSEg8pSbhId4yyL8cNJDDO988JgcPNePrh6uvaJ+Wio9WNiPUVGPo6Sm7ulRCyyvnjxwjxeKZqPhpI7IkoM3u6rmN283qSvalCH/AFBxL2aHTLIBiTTDS72PS8JRik3XN195VYHvey2pBIHhT+9XzIjc3lzdHwqxXISPjw+rX7Y4r2B9pAWx6vHRSfT2VWNyPtf3TDwpsjrxx9/NPenVttCXFRu+P9/p2z+MVYyg9N5s5wrmfPzc/Py5cvY84ayqJPbLRn8onctwRvxchx2+M5kwQBjdYpAXASw48KRr1t2XcClKfJCxcrhqcENdVvx2hnH81CwuvDPsaKBZYe+qYIZniuYyZWCebScr4aR9s1EwXw+WjIfDJUNHs1op8x239dGKga/7KpTBBSBaASaJi80u7ZdSvzXN1vZOyn+Tl/FbO3qk/TRS1ZzFYGfEWiJvNDE9Gre/LknXbuXLBIaMJxd04dRVTEVgbgItExe6Oj+XDK/NmaRlOLKjB8g1CkCikB8BJyQF7rzaT00LgFktZwSV/wFqyUVASLgjLzwtRxYPsgqgbRLbhAXsFOnCCgCjSHgjLzQLZQwyReW20U4rvodX1Diamy5amlF4FcEnJIXm70/q/fA6hEciEudIqAINI+AF/KCOPgQBd5LrKfE3ZaP137wC606RUARaA0Bb+QFsWbXiwYGBruNoMLGe3WkrM9xtbZetbYi8BoBr+SFXsqHJ+bacHffyMczXHjl5+REn5x/vfI0oAi0iIB38oJ81XchZ/NObX2F7W7Slo6n5mdW8/quYosLVasrAjYCiZAXO93cq5gP2mRiJmlSw27rm4dF/eIPJ199s7GxEftSuOojkCh5QZynz56bnsfFjn6l6OpIxSxu7BsYb1TnF4EwY3voVRrtk9YWpOE9abjPr6SmSlw4hdS7QHJRDuOS45FlMR6MD04aEpRlOiWcOHkRuO3CsflitLPuhV0eqJix+X21CsFJTsCnxU90BWWl4kKJmYc05MFB6WE6hg5EEGZNlWVc+SClesSFfCWveIi3jbwo3tpOxXw+km0Swwdhex4XTLGslk85r+3wpelmSVCQhbauZBmkI57U7kvJy+2qaDt5cTgr2yCx9lovbfS+2KWBiumdyptd/aYip7GtPo9MQRZFeYSiT0GDyiKPJMejJ+LyuCl3a2gT5IiLOz+2L31f5MW+ISsxQL/2WFkOvpRfypilcGrIi6AVKydVI4L45FejZJJEedyI//tY2Txc3NdPknHSUuDLo2EQIVGR6VPkoLLIA1lByXHM5FGTOzTZF8JMZ5thvg/yAmGRMCkn43KsKId8OsSz7lJHXgQUN7sXNorm6weFVBg8hIXTvql81WS03ojnLKXDB3lIAgkiJCoyfUoeVBZ53HmxnFR+kACVn4SB8vWca/KScrBv4GCTF2WUOy8SM+tl0U8teUkwf3jytEpk/dMF8/fRZKy3wjz0l+Mlg3cQd/eL5unTp1IkDacEAZARlZUiUVkZhw9lhYNyS6KxSYp17PQw8pLl0YctC/Ph+yAvjF+6MPIi2cqyWQ9ngrwkyK9evTJnZ2dmKVcygzP56i+WVwbLLe3OrgxVzBdjZXPrUcHgpfL5jWK1D/SlLr0IYNckd1xSUklqIBSWQx2pyJKUZP1GyQt1ZT+yLYZdk9fMbL8AAAPwSURBVBfaBWFiTHAkbRKo3GVinEynPFn3M0deQYDDFM+TJ0/M4dGJWd+BOeWimVjMVz+PNjRTqN5Ux+s5uHCDfWS+YKZXCya3V67et0JdtakVhGy606CMUF55SWJiukzDiEBMzAtT6LjkZcsQhZgP8gJxcSwYZ9DOCzKR2FjW3rFFyZ3WvI4gr7SCq3IpAhIBkFfcS9bTcDACSl7BuGiqIqAIpBwBJa+UT5CKpwgoAsEIKHkF46KpioAikHIElLxSPkEqniKgCAQjoOQVjIumKgKKQMoRUPJK+QSpeIqAIhCMgJJXMC6aqggoAilHQMkr5ROk4ikCikAwAkpewbhoqiKgCKQcASWvlE+QiqcIKALBCCh5BeOiqYqAIpByBJS8Uj5BKp4ioAgEI6DkFYyLpioCikDKEVDySvkEqXiKgCIQjICSVzAumqoIKAIpR0DJK+UTpOKZqqVQGtGDD8N6dNIYX5iBPdShtVHUkwYEaWGV7aXdxxglFgxLTJodg7S82mwbSdZT8koSbe2rKQQk8cDCKUmK1kGpuEhHvnS0mso2WIdlYH2UeUzLgg8Cjku8tlXYsPEpeYUho+mKgAMEQDQkL1uBZR66AlGhrFRKW5ERj0sCDsR31oQ99qiG7TGHlZU4hZVJU7ruvNI0GypLXQRANFBGOFuBQVbSXj2UkQTG3ZWtoDbhUQAqPNrD0Qxx9MdjGttDebTJdJRJwtljhzyUAT7lgNwyHXgAQ5lGeW1smJ5WX8krrTOjctUgQBKhUiITigglhA8HpSR5kXyQLpVShpEXRV5sm/1whwYZ0A6cTSLVxAT+yH4pH3FA95CdBCuxsEWTeTY2dtm0xZW80jYjKk8kApKgUBBKzF0E82xCkkopw6hvl2XnUqmRBlIkOcAnSZI4UD5JJ8lLhimDlF+GkU+ZiRtlt7FhW2n1lbzSOjMqVygCkkhkISoxlJCKKX3mU1lR11Zstmenyz4lecny6At9JOE4FvQlw+wb8lMWORYSlyyHfDglL6KiviLgCAEqIZrDTom7Hrt5kAeU03ZSKe36kpRkPanwSJflgsgLZYJIRLbpMiz7IiHJsUss7LISP4SVvFzOjLalCAgE7J2UyKrZYYGYgpwkL+RDWbkjk8Qo68YlL9RnW/CTcpKQ0CfGLuWQWJDckI+wxBNHbSWvpGZN+1EEFAFFwBij97x0GSgCikAmEVDyyuS0qdCKgCKg5KVrQBFQBDKJgJJXJqdNhVYEFAElL10DioAikEkElLwyOW0qtCKgCCh56RpQBBSBTCKg5JXJaVOhFQFFQMlL14AioAhkEgElr0xOmwqtCCgCSl66BhQBRSCTCPwLbqoGiHxtGcUAAAAASUVORK5CYII=" alt="ad2-4"></p> <p>其实 <code>virtualDOM</code>(虚拟 DOM) 之所以号称高性能，其实现原理就与此类似，使用对象的形式来描述复杂的<code>DOM结构</code>。</p> <h3 id="缓存元素集合"><a href="#缓存元素集合" class="header-anchor">#</a> 缓存元素集合</h3> <p>比如将通过选择器函数获取到的 DOM 元素赋值给变量，之后通过变量操作而不是再次使用选择器函数来获取。</p> <p>下面举例说明，假设我们现在要将上面代码所创建的 1 万个 div 元素的文本内容进行修改。每次重复使用获取选择器函数来获取元素，代码以及时间消耗如下所示。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">div</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="ad2-5"></p> <p>如果能够将元素集合赋值给 <code>JavaScript</code> 变量，每次通过变量引用 <code>DOM</code> 元素去修改元素，那么性能将会得到不小的提升。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> divs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> divs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  divs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对比两者耗时占比图可以看到，两者的<code>Rendering</code><strong>渲染时间</strong>较为接近。但缓存元素的方式在黄色的 <code>Scripting</code> 耗时上具有明显优势。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本课时从深入理解 <code>DOM</code> 的必要性说起，然后分析了 <code>DOM</code> 操作耗时的原因，最后再针对这些原因提出了可行的解决方法。</p> <p>除了这些方法之外，还有一些原则也可能帮助我们提升渲染性能，比如：</p> <ul><li>尽量不要使用<strong>复杂的匹配规则和复杂的样式</strong>，从而减少渲染引擎计算样式规则生成 <code>CSSOM</code> 树的时间；</li> <li>尽量减少重排和重绘影响的区域；</li> <li>使用 <code>CSS3</code> 特性来实现动画效果。</li></ul> <p>希望读完本篇文章后，你首先能理解原因，然后记住这些方法和原则，编写出高性能代码。</p> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p>文中若有不准确或错误的地方，欢迎指出，有兴趣可以的关注下<a href="https://github.com/GolderBrother" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>~</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2020/9/7 下午8:45:37</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/views/fe-advanced/ad1.html" class="prev">你真的熟悉 HTML 标签吗？</a></span> <span class="next"><a href="/blog/views/fe-advanced/ad3.html">3 个使用场景助你用好 DOM 事件</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.74817549.js" defer></script><script src="/blog/assets/js/2.f761193d.js" defer></script><script src="/blog/assets/js/16.7794197c.js" defer></script>
  </body>
</html>
